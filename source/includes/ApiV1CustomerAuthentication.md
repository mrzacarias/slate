# Customer Authentication

> Authorization Header

````
Authorization: Token token="123456......abcdef"
````

Customer API requests requiring authentication must have an authorization header with a valid API token.
The token is generated by the rails server, when the credentials are correct.
Each key will be saved on the server until the user logs off using that key.

## Customer Login

> Request Body

````
{
  "uuid":"00000000-0000-0000-0000-000000000000",
  "birthdate":"1950-01-01"
}
````

> Response Example 

````
{
  "info": "Success",
  "token": "123456......abcdef",
  "user": {
    "firstName": "Ammo"
  },
  "organization": {
    "id": 1,
    "logo": "assets/images/eyenetra-brand.png"
  }
}
````

The API Login uses visit uuid and the customer birthdate as the credentials to generate a token, that will be returned on the response body.
The request also returns the customer and organization information, which can be used to customize the customer experience.
Multiples logins are permitted, creating a key for each login.

### HTTP Request

`POST https://insight-api.eyenetra.com/api/v1/customer_login`

### Body Parameters

Parameter       | Description
--------------- | -------------------------------------------------------------------------------
uuid            | The UUID of a prescription in the database
birthdate       | The birthdate of the customer for whom that prescription applies.


## Customer Logout

> Authorization Header

````
Authorization: Token token="123456......abcdef"
````

> Response Example 

````
{
  "info": "Success"
}
````

The API logout is a DELETE request. The API will use the token on the authorization header to do the log off logic.
After login off, the key used for that will be deleted.
With the multiple login logic, after logging off with one key, the possible other keys and sessions will not be affected.

### HTTP Request

`DELETE https://insight-api.eyenetra.com/api/v1/customer_logout`

### Body Parameters

None
